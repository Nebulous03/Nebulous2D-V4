package nebulous.graphics;

import org.lwjgl.glfw.*;
import static org.lwjgl.glfw.GLFW.*;

import org.lwjgl.Version;

import nebulous.utils.Console;

public class Window {
	
	private String TITLE;
	private int WIDTH, HEIGHT;
	private long windowID = 0;

	public Window() {}
	
	public Window createWindow(int width, int height, String title){
		this.TITLE = title;
		this.WIDTH = width;
		this.HEIGHT = height;
		printStats();
		initGLWindow();
		return this;
	}
	
	private void initGLWindow(){
		GLFWErrorCallback.createPrint(System.err).set();
		
		if (glfwInit()){
			Console.println("GLFWInit() completed successfully...");
		} else {
			Console.printErr("GLFWInit() failed to complete successfully!");
			throw new IllegalStateException("ERROR: Unable to initialize GLFW!");
		}
		
		glfwWindowHint(GLFW_RESIZABLE, GLFW_TRUE);
		
		windowID = glfwCreateWindow(WIDTH, HEIGHT, TITLE, 0, 0);
		if(windowID == 0){ throw new RuntimeException("ERROR: Failed to create the GLFW window!");}
		
		glfwMakeContextCurrent(windowID);
		glfwSwapInterval(1);
	}
	
	private void printStats(){
		Console.println("LWJGL " + Version.getVersion() + "!");
	}

}
